/**
 * Performance Optimizations
 *
 * Scoped rules for GPU acceleration, containment, and reduced-motion.
 * Avoids blanket selectors that break 3D transforms and backdrop effects.
 */

/* Optimize sticky/fixed elements */
header[class*="sticky"],
aside[class*="fixed"],
nav[class*="sticky"] {
  will-change: transform;
  transform: translateZ(0);
  contain: layout style paint;
}

/* Debounce expensive animations during resize */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Prevent layout thrashing on responsive changes */
img,
video,
iframe {
  contain: layout paint;
  max-width: 100%;
  height: auto;
}

/* Optimize form inputs to prevent reflow */
input,
select,
textarea {
  contain: layout style;
}

/* Reduce GPU load on hover states */
button,
a {
  will-change: auto;
}

button:hover,
a:hover,
button:focus,
a:focus {
  will-change: transform, opacity;
}

/* Optimize table rendering in admin pages */
table {
  contain: layout;
  table-layout: fixed;
}

/* Prevent excessive repaints on scroll containers */
[class*="overflow-"],
[class*="overflow-y-"],
[class*="overflow-x-"] {
  contain: paint;
}

/* Optimize complex card layouts */
.card {
  isolation: isolate;
}

/* Virtual scrolling hint for long lists */
@supports (content-visibility: auto) {
  tbody tr,
  ul > li {
    content-visibility: auto;
    contain-intrinsic-size: auto 50px;
  }
}
